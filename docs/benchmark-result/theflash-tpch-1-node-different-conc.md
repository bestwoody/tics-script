# TheFlash TPCH on 1 node, pushdown + codegen + broadcast, different concurrent config.

## Config and result
* CH-0002: partitions=16, decoders=4, encoders=2
* CH-0003: partitions=16, decoders=4, encoders=4
* CH-0004: partitions=16, decoders=4, encoders=16
* CH-0005: partitions=16, decoders=4, encoders=8
* CH-0006: partitions=16, decoders=2, encoders=16
* CH-0007: partitions=16, decoders=1, encoders=16
* CH-0008: partitions=16, decoders=16, encoders=4
* CH-0009: partitions=16, decoders=4, encoders=32
* CH-0010: partitions=16, decoders=8, encoders=16
* CH-0011: partitions=32, decoders=4, encoders=16

| Query | CH-0002 | CH-0003 | CH-0004 | CH-0005 | CH-0006 | CH-0007 | CH-0008 | CH-0009 | CH-0010 | CH-0011 |
| ----- | ------: | ------: | ------: | ------: | ------: | ------: | ------: | ------: | ------: | ------: |
| Q01   |    10.4 |    10.0 |    10.2 |    10.1 |    10.3 |    10.1 |    10.1 |     9.8 |    10.0 |    10.1 |
| Q02   |    44.8 |    44.3 |    45.3 |    44.2 |    45.3 |    45.9 |    44.5 |    45.6 |    46.0 |    45.7 |
| Q03   |    68.5 |    70.5 |    69.2 |    70.2 |    70.9 |    69.4 |    72.3 |    71.0 |    72.5 |    70.4 |
| Q04   |   357.5 |   292.3 |   293.2 |   294.4 |   302.1 |   305.3 |   308.4 |   305.7 |   304.4 |   297.1 |
| Q05   |   126.5 |   121.4 |   129.0 |   123.7 |   122.0 |   120.6 |   124.2 |   123.6 |   129.2 |   121.9 |
| Q06   |     4.4 |     4.5 |     4.6 |     4.6 |     4.5 |     4.5 |     4.6 |     4.5 |     4.5 |     4.6 |
| Q07   |    90.6 |    92.6 |    91.0 |    98.9 |    91.6 |    87.1 |    88.0 |    91.0 |    93.4 |    89.7 |
| Q08   |   129.7 |   129.9 |   128.0 |   128.5 |   127.8 |   130.7 |   130.2 |   128.4 |   129.1 |   128.8 |
| Q09   |   185.4 |   173.9 |   169.2 |   170.2 |   175.2 |   176.2 |   182.4 |   198.6 |   173.9 |   178.7 |
| Q10   |    61.1 |    55.5 |    58.5 |    57.1 |    57.1 |    53.8 |    56.1 |    58.9 |    58.1 |    57.4 |
| Q11   |    19.6 |    17.5 |    18.3 |    18.4 |    17.6 |    18.5 |    18.3 |    18.0 |    19.0 |    18.0 |
| Q12   |    40.6 |    34.7 |    36.1 |    35.9 |    36.3 |    35.4 |    35.3 |    36.6 |    36.1 |    35.6 |
| Q13   |    55.9 |    56.4 |    57.7 |    57.7 |    57.6 |    57.8 |    58.0 |    58.8 |    58.5 |    59.3 |
| Q14   |    13.4 |    12.8 |    12.9 |    12.5 |    12.9 |    13.0 |    14.0 |    12.6 |    13.6 |    13.5 |
| Q15   |         |         |         |         |         |         |         |         |         |         |
| Q16   |   244.0 |   251.8 |   449.5 |   563.1 |   140.4 |   311.1 |    99.3 |   250.9 |   375.1 |   132.8 |
| Q17   |         |         |         |         |         |         |         |         |         |         |
| Q18   |         |         |         |         |         |         |         |         |         |         |
| Q19   |    55.7 |    51.1 |    51.9 |    51.0 |    53.2 |    53.5 |    51.7 |    52.4 |    51.6 |    51.6 |
| Q20   |         |         |         |         |         |         |         |         |         |         |
| Q21   |         |         |         |         |         |         |         |         |         |         |
| Q22   |   120.9 |    93.5 |    87.7 |    86.3 |    88.3 |    89.1 |    89.5 |    88.6 |    87.0 |    87.1 |

## Raw result data
* CH-0002: partitions=16, decoders=4, encoders=2
```
Q01, avg:  10.4, detail: [9.5, 10.6, 10.6, 11.2, 10.2, 10.3]
Q02, avg:  44.8, detail: [45.0, 44.7, 44.5, 45.5, 42.3, 46.5]
Q03, avg:  68.5, detail: [66.6, 67.0, 72.3, 70.2, 64.8, 70.4]
Q04, avg: 357.5, detail: [353.5, 354.0, 356.8, 361.0, 362.3]
Q05, avg: 126.5, detail: [127.2, 131.2, 128.2, 124.7, 121.1]
Q06, avg:   4.4, detail: [4.5, 4.2, 4.2, 4.7, 4.4]
Q07, avg:  90.6, detail: [89.3, 83.4, 98.6, 92.5, 89.3]
Q08, avg: 129.7, detail: [127.3, 127.5, 129.9, 133.5, 130.1]
Q09, avg: 185.4, detail: [195.6, 187.6, 196.7, 174.2, 173.0]
Q10, avg:  61.1, detail: [63.5, 59.5, 62.2, 58.7, 61.8]
Q11, avg:  19.6, detail: [19.5, 19.5, 20.3, 19.2, 19.6]
Q12, avg:  40.6, detail: [39.3, 40.2, 40.9, 41.1, 41.4]
Q13, avg:  55.9, detail: [57.9, 55.4, 54.5, 55.3, 56.2]
Q14, avg:  13.4, detail: [13.9, 13.6, 13.6, 13.6, 12.3]
Q16, avg: 244.0, detail: [219.9, 354.3, 126.7, 350.1, 169.1]
Q19, avg:  55.7, detail: [55.1, 58.6, 55.2, 54.7, 55.1]
Q22, avg: 120.9, detail: [127.7, 116.5, 130.0, 117.4, 112.7]
```
* CH-0003: partitions=16, decoders=4, encoders=4
```
Q01, avg:  10.0, detail: [9.6, 9.4, 10.3, 10.4, 10.4]
Q02, avg:  44.3, detail: [44.4, 44.9, 41.7, 45.3, 45.2]
Q03, avg:  70.5, detail: [70.6, 67.1, 69.3, 70.2, 75.5]
Q04, avg: 292.3, detail: [305.3, 295.3, 282.8, 289.1, 288.9]
Q05, avg: 121.4, detail: [114.8, 131.7, 119.9, 125.0, 115.8]
Q06, avg:   4.5, detail: [4.8, 4.5, 4.4, 4.3, 4.5]
Q07, avg:  92.6, detail: [92.6, 97.0, 90.6, 91.1, 91.6]
Q08, avg: 129.9, detail: [136.9, 129.2, 125.2, 133.8, 124.6]
Q09, avg: 173.9, detail: [181.4, 177.4, 180.5, 158.3, 171.7]
Q10, avg:  55.5, detail: [53.7, 56.1, 52.7, 59.0, 55.9]
Q11, avg:  17.5, detail: [16.6, 16.4, 17.7, 17.8, 18.9]
Q12, avg:  34.7, detail: [32.8, 34.3, 33.6, 35.6, 37.4]
Q13, avg:  56.4, detail: [55.9, 56.0, 55.4, 59.3, 55.2]
Q14, avg:  12.8, detail: [11.9, 13.1, 11.9, 14.2, 13.0]
Q16, avg: 251.8, detail: [580.8, 124.6, 287.4, 127.2, 139.1]
Q19, avg:  51.1, detail: [51.0, 50.1, 49.4, 51.8, 53.4]
Q22, avg:  93.5, detail: [88.8, 102.4, 96.9, 84.3, 94.9]
```
* CH-0004: partitions=16, decoders=4, encoders=16
```
Q01, avg:  10.2, detail: [10.6, 10.5, 9.6, 10.1, 10.0]
Q02, avg:  45.3, detail: [47.1, 44.8, 42.9, 46.9, 44.8]
Q03, avg:  69.2, detail: [71.5, 66.4, 64.0, 72.6, 71.3]
Q04, avg: 293.2, detail: [291.4, 290.3, 302.7, 287.7, 293.8]
Q05, avg: 129.0, detail: [121.6, 129.5, 133.7, 124.4, 135.6]
Q06, avg:   4.6, detail: [4.6, 4.5, 4.6, 4.5, 4.8]
Q07, avg:  91.0, detail: [90.2, 97.9, 87.3, 91.5, 87.9]
Q08, avg: 128.0, detail: [125.6, 126.9, 136.3, 126.6, 124.6]
Q09, avg: 169.2, detail: [169.2, 166.3, 172.4, 176.2, 161.8]
Q10, avg:  58.5, detail: [55.9, 58.9, 58.5, 59.4, 59.7]
Q11, avg:  18.3, detail: [17.6, 18.9, 19.2, 18.5, 17.5]
Q12, avg:  36.1, detail: [36.1, 35.3, 37.1, 35.9, 35.9]
Q13, avg:  57.7, detail: [58.1, 58.6, 54.6, 60.3, 56.8]
Q14, avg:  12.9, detail: [12.9, 12.4, 12.6, 13.0, 13.6]
Q16, avg: 449.5, detail: [127.5, 554.4, 334.1, 673.6, 558.1]
Q19, avg:  51.9, detail: [52.1, 52.3, 52.6, 51.6, 50.9]
Q22, avg:  87.7, detail: [89.8, 94.6, 80.5, 86.3, 87.5]
```
* CH-0005: partitions=16, decoders=4, encoders=8
```
Q01, avg:  10.1, detail: [10.0, 9.5, 11.0, 9.6, 10.6]
Q02, avg:  44.2, detail: [44.2, 42.7, 45.3, 43.4, 45.6]
Q03, avg:  70.2, detail: [65.7, 78.1, 67.4, 68.0, 72.0]
Q04, avg: 294.4, detail: [288.3, 289.9, 295.1, 296.0, 302.8]
Q05, avg: 123.7, detail: [130.1, 125.1, 122.4, 115.2, 125.5]
Q06, avg:   4.6, detail: [4.8, 4.5, 4.7, 4.8, 4.4]
Q07, avg:  98.9, detail: [91.4, 97.2, 112.2, 94.3, 99.3]
Q08, avg: 128.5, detail: [129.9, 126.2, 130.9, 131.9, 123.5]
Q09, avg: 170.2, detail: [172.8, 161.5, 162.1, 176.3, 178.2]
Q10, avg:  57.1, detail: [56.7, 54.7, 61.7, 52.4, 59.8]
Q11, avg:  18.4, detail: [17.6, 19.0, 18.5, 18.3, 18.4]
Q12, avg:  35.9, detail: [35.4, 34.3, 37.2, 37.2, 35.4]
Q13, avg:  57.7, detail: [58.3, 56.5, 57.4, 59.7, 56.8]
Q14, avg:  12.5, detail: [12.5, 12.9, 12.5, 12.1, 12.6]
Q16, avg: 563.1, detail: [838.8, 472.9, 847.9, 173.2, 482.9]
Q19, avg:  51.0, detail: [50.7, 51.2, 49.7, 51.6, 51.8]
Q22, avg:  86.3, detail: [82.9, 86.1, 86.3, 91.0, 85.1]
```
* CH-0006: partitions=16, decoders=2, encoders=16
```
Q01, avg:  10.3, detail: [10.6, 11.3, 9.4, 10.2, 10.1]
Q02, avg:  45.3, detail: [45.1, 44.7, 44.9, 44.9, 46.8]
Q03, avg:  70.9, detail: [70.9, 67.2, 72.2, 75.6, 68.8]
Q04, avg: 302.1, detail: [296.7, 303.4, 309.6, 300.2, 300.6]
Q05, avg: 122.0, detail: [121.9, 129.0, 117.6, 121.1, 120.2]
Q06, avg:   4.5, detail: [4.3, 4.3, 4.4, 4.6, 4.8]
Q07, avg:  91.6, detail: [88.5, 88.7, 86.7, 102.8, 91.4]
Q08, avg: 127.8, detail: [128.3, 125.0, 124.2, 128.7, 132.6]
Q09, avg: 175.2, detail: [171.3, 185.6, 181.9, 166.9, 170.5]
Q10, avg:  57.1, detail: [59.0, 54.0, 56.7, 55.3, 60.3]
Q11, avg:  17.6, detail: [17.8, 17.2, 17.0, 18.3, 17.9]
Q12, avg:  36.3, detail: [37.8, 34.8, 34.9, 37.3, 36.7]
Q13, avg:  57.6, detail: [59.6, 54.9, 59.5, 58.8, 55.3]
Q14, avg:  12.9, detail: [13.3, 12.7, 13.3, 11.9, 13.4]
Q16, avg: 140.4, detail: [145.6, 128.6, 128.9, 120.6, 178.2]
Q19, avg:  53.2, detail: [51.8, 54.9, 55.0, 52.8, 51.5]
Q22, avg:  88.3, detail: [99.3, 91.3, 82.1, 82.2, 86.5]
```
* CH-0007: partitions=16, decoders=1, encoders=16
```
Q01, avg:  10.1, detail: [10.5, 10.2, 10.0, 10.2, 9.7]
Q02, avg:  45.9, detail: [44.5, 44.8, 46.6, 46.0, 47.4]
Q03, avg:  69.4, detail: [70.1, 66.2, 68.2, 72.2, 70.5]
Q04, avg: 305.3, detail: [306.8, 304.2, 307.7, 305.9, 301.7]
Q05, avg: 120.6, detail: [122.8, 121.5, 121.8, 119.8, 117.0]
Q06, avg:   4.5, detail: [4.3, 4.7, 4.5, 4.4, 4.4]
Q07, avg:  87.1, detail: [86.5, 93.9, 84.3, 85.9, 84.8]
Q08, avg: 130.7, detail: [128.6, 138.4, 128.1, 131.0, 127.4]
Q09, avg: 176.2, detail: [165.7, 189.4, 181.0, 167.6, 177.1]
Q10, avg:  53.8, detail: [53.6, 54.2, 54.9, 52.6, 53.9]
Q11, avg:  18.5, detail: [17.8, 16.6, 18.6, 19.1, 20.3]
Q12, avg:  35.4, detail: [36.3, 34.9, 34.9, 36.3, 34.6]
Q13, avg:  57.8, detail: [55.2, 54.6, 57.6, 60.3, 61.1]
Q14, avg:  13.0, detail: [12.8, 13.1, 12.6, 14.3, 12.3]
Q16, avg: 311.1, detail: [108.6, 126.8, 171.0, 924.3, 225.0]
Q19, avg:  53.5, detail: [54.3, 53.3, 53.7, 52.1, 54.0]
Q22, avg:  89.1, detail: [84.2, 88.9, 97.8, 81.3, 93.5]
```
* CH-0008: partitions=16, decoders=16, encoders=4
```
Q01, avg:  10.1, detail: [9.7, 9.7, 11.2, 10.4, 9.4]
Q02, avg:  44.5, detail: [46.2, 45.8, 43.7, 44.7, 42.3]
Q03, avg:  72.3, detail: [74.0, 71.3, 68.7, 72.9, 74.4]
Q04, avg: 308.4, detail: [327.8, 329.0, 284.3, 304.8, 296.2]
Q05, avg: 124.2, detail: [129.5, 120.4, 124.9, 124.0, 122.2]
Q06, avg:   4.6, detail: [4.4, 4.6, 4.6, 4.7, 4.5]
Q07, avg:  88.0, detail: [85.5, 86.7, 87.9, 86.7, 93.2]
Q08, avg: 130.2, detail: [134.1, 132.4, 132.2, 123.8, 128.4]
Q09, avg: 182.4, detail: [188.4, 190.5, 178.7, 178.4, 176.1]
Q10, avg:  56.1, detail: [61.9, 53.8, 56.3, 55.4, 53.3]
Q11, avg:  18.3, detail: [18.6, 17.8, 19.2, 16.7, 19.4]
Q12, avg:  35.3, detail: [35.8, 34.9, 34.1, 35.6, 36.2]
Q13, avg:  58.0, detail: [58.3, 56.5, 56.5, 59.3, 59.4]
Q14, avg:  14.0, detail: [13.8, 13.6, 14.4, 14.7, 13.3]
Q16, avg:  99.3, detail: [111.1, 100.8, 89.5, 96.0]
Q19, avg:  51.7, detail: [52.6, 52.8, 52.7, 50.0, 50.4]
Q22, avg:  89.5, detail: [88.7, 88.3, 101.3, 83.7, 85.4]
```
* CH-0009: partitions=16, decoders=4, encoders=32
```
Q01, avg:   9.8, detail: [10.1, 9.6, 9.8, 9.6, 9.8]
Q02, avg:  45.6, detail: [46.5, 46.7, 46.1, 44.4, 44.2]
Q03, avg:  71.0, detail: [73.8, 68.5, 69.8, 70.4, 72.3]
Q04, avg: 305.7, detail: [303.8, 309.8, 305.1, 301.5, 308.1]
Q05, avg: 123.6, detail: [119.1, 126.1, 124.3, 125.7, 122.9]
Q06, avg:   4.5, detail: [4.7, 4.5, 4.5, 4.6, 4.4]
Q07, avg:  91.0, detail: [93.8, 90.8, 91.5, 94.2, 84.7]
Q08, avg: 128.4, detail: [126.0, 124.2, 129.8, 135.2, 126.7]
Q09, avg: 198.6, detail: [163.8, 180.8, 285.3, 186.8, 176.3]
Q10, avg:  58.9, detail: [56.8, 56.7, 60.0, 59.4, 61.7]
Q11, avg:  18.0, detail: [18.0, 18.2, 17.5, 17.6, 18.9]
Q12, avg:  36.6, detail: [36.6, 37.7, 34.3, 37.1, 37.4]
Q13, avg:  58.8, detail: [58.6, 59.4, 57.7, 60.6, 57.6]
Q14, avg:  12.6, detail: [12.3, 12.9, 12.4, 13.1, 12.3]
Q16, avg: 250.9, detail: [124.9, 229.3, 325.2, 448.1, 126.9]
Q19, avg:  52.4, detail: [53.6, 50.8, 50.8, 52.3, 54.3]
Q22, avg:  88.6, detail: [93.7, 85.6, 90.9, 90.4, 82.2]
```
* CH-0010: partitions=16, decoders=8, encoders=16
```
Q01, avg:  10.0, detail: [9.6, 10.0, 10.2, 10.8, 9.4]
Q02, avg:  46.0, detail: [45.2, 44.1, 47.8, 47.5, 45.6]
Q03, avg:  72.5, detail: [72.7, 74.7, 70.8, 70.8, 73.4]
Q04, avg: 304.4, detail: [295.3, 300.1, 309.3, 306.2, 311.3]
Q05, avg: 129.2, detail: [120.0, 123.4, 138.0, 130.9, 133.6]
Q06, avg:   4.5, detail: [4.3, 4.5, 4.8, 4.6, 4.5]
Q07, avg:  93.4, detail: [97.2, 98.2, 90.7, 87.8, 92.9]
Q08, avg: 129.1, detail: [127.2, 129.3, 125.1, 138.2, 125.5]
Q09, avg: 173.9, detail: [172.2, 163.1, 177.4, 187.3, 169.5]
Q10, avg:  58.1, detail: [56.5, 55.3, 60.0, 61.8, 57.1]
Q11, avg:  19.0, detail: [19.6, 18.1, 19.5, 18.7, 19.1]
Q12, avg:  36.1, detail: [34.8, 35.8, 36.9, 37.0, 36.0]
Q13, avg:  58.5, detail: [60.6, 59.1, 58.6, 57.6, 56.8]
Q14, avg:  13.6, detail: [13.5, 13.2, 13.6, 14.0, 13.9]
Q16, avg: 375.1, detail: [775.4, 191.2, 328.2, 148.1, 432.6]
Q19, avg:  51.6, detail: [51.1, 51.7, 50.3, 51.7, 53.1]
Q22, avg:  87.0, detail: [87.5, 89.6, 83.0, 84.0, 90.8]
```
* CH-0011: partitions=32, decoders=4, encoders=16
```
Q01, avg:  10.1, detail: [10.8, 10.6, 9.5, 10.0, 9.8]
Q02, avg:  45.7, detail: [45.7, 47.0, 45.1, 46.2, 44.7]
Q03, avg:  70.4, detail: [71.7, 77.3, 68.6, 67.4, 67.2]
Q04, avg: 297.1, detail: [307.6, 290.2, 291.8, 303.7, 292.2]
Q05, avg: 121.9, detail: [119.7, 123.3, 118.9, 124.7, 122.9]
Q06, avg:   4.6, detail: [4.7, 4.6, 4.6, 4.7, 4.5]
Q07, avg:  89.7, detail: [86.5, 91.5, 88.4, 95.0, 87.3]
Q08, avg: 128.8, detail: [135.8, 123.8, 129.1, 127.9, 127.6]
Q09, avg: 178.7, detail: [176.5, 165.9, 180.4, 184.1, 186.7]
Q10, avg:  57.4, detail: [58.6, 54.0, 58.5, 58.5, 57.4]
Q11, avg:  18.0, detail: [17.8, 17.4, 17.6, 17.5, 19.5]
Q12, avg:  35.6, detail: [34.6, 34.5, 36.5, 35.0, 37.2]
Q13, avg:  59.3, detail: [59.7, 59.8, 56.7, 59.0, 61.4]
Q14, avg:  13.5, detail: [14.6, 13.7, 12.5, 12.7, 13.8]
Q16, avg: 132.8, detail: [140.0, 128.6, 131.1, 140.9, 123.5]
Q19, avg:  51.6, detail: [51.3, 51.5, 52.7, 50.5, 52.0]
Q22, avg:  87.1, detail: [86.3, 88.1, 89.4, 84.6, 87.0]
```

## Environment

### Hardware
* Intel Xeon E312xx 16 cores 2.4Ghz.
* 16G Memory 1600MHz .
* SSD 2.0GB+/s.

### Software
* CentOS Linux release 7.2.1511
* Spark version 2.1.1
* ClickHouse server version 1.1.54310

### Data Set
* TPCH-100 100G data scala
