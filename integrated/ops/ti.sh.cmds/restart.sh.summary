#!/bin/bash

function cmd_ti_restart()
{
	local ti_file="${1}"
	local ti_args="${2}"
	local cmd_mod_names="${3}"
	local cmd_hosts="${4}"
	local cmd_indexes="${5}"
	local mods="${6}"

	local fast="${7}"

	local here=`cd $(dirname ${BASH_SOURCE[0]}) && pwd`
	source "${here}/_env.sh"
	auto_error_handle

	local stop_cmd='fstop'
	if [ ! -z "${fast}" ] && [ "${fast}" != 'fast' ] && [ "${fast}" != 'true' ]; then
		local stop_cmd='stop'
	fi

	"${integrated}/ops/ti.sh" -h "${cmd_hosts}" -m "${cmd_mod_names}" -i "${cmd_indexes}" \
		-k "${ti_args}" "${ti_file}" "${stop_cmd}:run"
}

cmd_ti_restart "${@}"
